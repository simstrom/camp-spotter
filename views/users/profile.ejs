<%- layout('layouts/boilerplate') %>
<link rel="stylesheet" href="/styles/stars.css" />

<div class="container mt-3">
	<h1 class="mb-3">Profile</h1>
	<div class="row">
		<div class="col-lg-6">
			<h2 class="mb-3">My Campgrounds</h2>
			<div class="">
				<% if (!campgrounds.length) { %>
				<p class="text-muted">You have not added any campgrounds yet!</p>
				<p><a href="/campgrounds/new">Add a Campground</a></p>
				<% } %> <% for (let camp of campgrounds) { %>
				<div class="card shadow mb-3">
					<div class="row">
						<div class="col-6">
							<img
								src="<%= camp.images[0].url %> "
								class="img-fluid profile-img"
								alt=""
							/>
						</div>
						<div
							class="
								card-body
								col-6
								d-flex
								justify-content-center
								flex-column
								gap-2
							"
						>
							<h5 class="card-title mb-1">
								<a href="/campgrounds/<%= camp._id %>" class="profile-link">
									<%= camp.title %>
								</a>
							</h5>
							<h6 class="card-subtitle mb-2 text-muted">
								<%= camp.location %>
							</h6>
							<p class="text-muted">
								Updated: <%= camp.updated.toLocaleDateString() %>
							</p>
						</div>
					</div>
				</div>
				<% } %>
			</div>
		</div>
		<div class="col-lg-6">
			<h2 class="mb-3">My Reviews</h2>
			<% if (!reviews.length) { %>
			<p class="text-muted">You have not written any reviews yet!</p>
			<% } %> <% for (let review of reviews) { %>
			<div class="card shadow mb-3">
				<div class="card-body">
					<div class="d-flex justify-content-between mb-3">
						<div>
							<h5 class="card-title">
								<a
									class="profile-link"
									href="/campgrounds/<%= review.campground._id %>"
								>
									<%= review.campground.title %>
								</a>
							</h5>
							<h6 class="card-subtitle text-muted">
								<%= review.campground.location %>
							</h6>
						</div>
						<p class="starability-result" data-rating="<%= review.rating %>">
							Rated: <%= review.rating %> stars
						</p>
					</div>
					<p class="card-text mb-2"><%= review.body %></p>
				</div>
				<div class="card-footer text-muted">
					Posted: <%= review.created.toLocaleDateString() %>
				</div>
			</div>
			<% } %>
		</div>
	</div>
</div>
